\section{Non-volatile memory}
\label{chap:non-volatile-memory}

Bộ nhớ (memory) là thiết bị dùng để lưu trữ dữ liệu cho máy tính. Bộ nhớ chính
(primary memory) được dùng cho các tác vụ yêu cầu tốc độ cao, bộ nhớ thứ cấp
(secondary memory) tuy có tốc độ chậm hơn nhưng có thể chứa được nhiều dữ liệu
hơn. Nếu cần thiết, các dữ liệu ở bộ nhớ chính có thể được lưu trữ ở bộ nhớ thứ
cấp thông qua kỹ thuật quản lý bộ nhớ gọi là bộ nhớ ảo (virtual
memory)~\cite{VolatileNonVolatileComputer}.

Trong các hệ thống tính toán ngày nay, bộ nhớ được chia thành hai loại:

\begin{itemize}
    \item \textbf{Volatile memory (bộ nhớ khả biến)}: là loại bộ nhớ cần điện
    năng để duy trì trạng thái các dữ liệu trong bộ nhớ. Đa số các bộ nhớ khả
    biến từ chất bán dẫn rơi vào hai loại: Static RAM (SRAM) hoặc dynamic RAM
    (DRAM). Đối với SRAM, ta chỉ cần duy trì nguồn điện thì dữ liệu sẽ được lưu
    giữ trong bộ nhớ, tuy nhiên SRAM cần sử dụng sáu bán dẫn (transistor) cho
    mỗi bit. Mặt khác, DRAM chỉ cần một bán dẫn cho mỗi bit, qua đó cho phép bộ
    nhớ có mật độ bit cao hơn. Tuy nhiên, DRAM cần các chu trình làm tươi
    (refresh cycle) thường xuyên để lưu giữ dữ liệu.
    
    \item \textbf{Non-volatile memory (bộ nhớ bất khả biến)}: là loại bộ nhớ có
    thể lưu trữ dữ liệu ngay cả khi thiết bị không được cung cấp điện năng.
    Điển hình cho bộ nhớ bất khả biến là các bộ nhớ từ (magnetic storage
    device, ví dụ như ổ cứng hay đĩa mềm), đĩa quang (optical disc) hay NAND
    Flash (điển hình là solid state drive hay SSD). Các bộ nhớ bất khả biến có
    tiềm năng trong tương lai bao gồm FeRAM, CBRAM,PRAM, SONOS, RRAM, Racetrack
    memory, NRAM và Millipede.
\end{itemize}

So với non-volatile memory, volatile memory là công nghệ có tốc độ vượt trội
hơn, tuy nhiên có khả năng mở rộng (scalability) kém hơn. Chính vì vậy, mục
đích của non-volatile memory là lưu trữ các dữ liệu mà CPU cần truy cập tức
thời. Trong khi đó, non-volatile memory được dùng để lưu trữ các dữ liệu sẽ
được sử dụng trong tương lai.

Khi chuyển dữ liệu từ NAND sang DRAM, hiệu suất chung của hệ thống bị giới hạn
bởi một độ trễ khá lớn do sự khác biệt giữa hai loại bộ nhớ. Sự khác biệt này
được giảm thiểu bằng các kỹ thuật sử dụng các kiến trúc khác nhau, tuy nhiên
phải đánh đổi cho sự phức tạp của hệ thống và kích thước chip. Trong những năm
gần đây, các nhà nghiên cứu đã bắt đầu khám phá các cách thức cải tiến bộ nhớ
cho phù hợp với kiến trúc bộ nhớ hiện tại. Storage class memory (SCM, tạm dịch
``bộ nhớ cấp lưu trữ'') được đề xuất để giảm sự khác biệt giữa
``memory-memory'' và
``storage-memory''~\cite{gouxOxRAMTechnologyDevelopment2019}.

Để đáp ứng các nhu cầu tính toán hiện nay, các thiết bị bộ nhớ mới được nghiên
cứu và ra đời. Nổi bật là resistive RAM với spin-transfer torque magnetic RAM
(STT-MRAM), phase-change RAM (PCRAM) và PRAM hay ReRAM.

\subsection{NAND Flash}
Bộ nhớ Flash được chế tạo bởi TS. Fujio Masuoka tại Toshiba Corp. vào năm 1984.
Dựa trên thiết kế của Masuoka, Intel đưa ra thị trường bộ nhớ NOR Flash để sử
dụng với mục đích lưu trữ code chương trình cho các sản phẩm hạng tiêu dùng.
NOR Flash cũng là nền tảng cho các thẻ nhớ Flash và các ổ đĩa bán dẫn (solid
state drive, hay SSD) vào những năm 1990.

Toshiba Corp. giới thiệu bộ nhớ NAND Flash vào năm 1988 với hứa hẹn đem lại giá
thành rẻ hơn NOR Flash và có thông lượng (throughput) nhanh hơn. Thay vì tổ
chức dưới dạng word hoặc byte như NOR Flash, bộ nhớ NAND Flash được tổ chức
dưới dạng trang (page) và xóa block (một block bao gồm 64 trang hoặc nhiều
hơn). Kiến trúc này có lợi cho giá thành nhưng không phù hợp với nhu cầu truy
cập ngẫu nhiên (random access). Vì vậy, NAND Flash thường được dùng để làm
thiết bị lưu trữ dữ liệu tương tự như đĩa quang hay ổ cứng.

\image[1]{img/nand_applications.png}{Các ứng dụng của NAND Flash (Nguồn: Forward
Insight).}{fig:nand_applications}

Nhu cầu về nhiếp ảnh và lưu trữ số là nguyên nhân chính làm tăng nhu cầu NAND
Flash trên thị trường tại thời điểm nó ra mắt. Ngoài ra, NAND Flash còn được
dùng để lưu trữ dữ liệu hay code chương trình ở các thiết bị bỏ túi như điện
thoại, máy nghe nhạc MP3, máy quay cầm tay, v.v.

Các thiết bị SSD đầu tiên là các thiết bị dựa trên RAM (RAM-based SSD) được chế
tạo tiên phong bởi StorageTek vào năm 1978. Đến những năm 1990s, SSD dựa trên
Flash (Flash-based SSD) mới được phát triển. Nhờ sự sụt giảm giá thành nhanh và
đáng kinh ngạc, NAND Flash đã có thể thâm nhập vào thị trường ổ cứng (HDD) và
làm tuyệt chủng công nghệ đĩa mềm (floppy disk). SSD có khả năng cung cấp tốc
độ nhanh hơn nhiều lần và có độ tin cậy cao nhờ thiết kế không phải chứa nhiều
các bộ phận vật lý.

Trong các môi trường tính toán hiệu năng cao, SSD có thể được sử dụng làm I/O
accelerator. Trong môi trường doanh nghiệp, các hệ thống HDD phải sử dụng các
kỹ thuật khác nhau để làm tăng băng thông và giảm thời gian truy cập dữ liệu.
Với hệ thống HDD sử dụng RAID, ta có thể làm tăng băng thông bằng cách thêm
nhiều HDD hơn, nhưng phải hi sinh chi phí cho điện năng, không gian và chi phí
làm mát.

Xét giá thành cho mỗi GB (Gigabyte), HDD hoàn toàn vượt trội so với SSD. Tuy
nhiên, nếu xét trên toàn hệ thống, ta cần số lượng SSD ít hơn rất nhiều so với
HDD xét trên cùng hiệu năng. Nếu kể thêm các chi phí bảo dưỡng, điện năng
và tiết kiệm không gian, SSD có khả năng là một lựa chọn hấp dẫn hơn
HDD~\cite{wongMarketApplicationsNAND2010}.

Hình~\ref{fig:ssd_vs_hdd} cho thấy tốc độ đọc và ghi vượt trội của SSD so với
HDD. Hơn nữa, trong nhiều năm tới, với công nghệ 3-D NAND, NAND Flash vẫn có khả
năng tiếp tục tăng dung lượng lưu trữ trên cùng một diện tích silicon, làm cho
giá thành liên tục giảm xuống trong tương lai. Trong khi đó, giá thành của HDD
vẫn giữ nguyên trong vòng nhiều năm
nay~\cite{monziocompagnoniReviewingEvolutionNAND2017}.

\image[1]{img/ssd_vs_hdd.png}{So sánh throughput đọc và ghi giữa HDD và
SSD.~\cite{monziocompagnoniReviewingEvolutionNAND2017}}{fig:ssd_vs_hdd}


\subsection{Phase-change memory}
Phase-change memory (PCM hoặc PRAM) đã và đang là công nghệ có nhiều hứa hẹn
trong những năm gần đây. Với vai trò là non-volatile memory với độ trễ thấp và
có độ tin cậy cao, PCM được coi là giải pháp có tiềm năng trong các hệ thống bộ
nhớ (memory system). Sự cạnh tranh của PCM với các công nghệ khác dần được tăng
lên khi PCM giảm được kích thước cell, chuyển từ công nghệ bán dẫn sang kích
thước nhỏ hơn là đi-ốt (vertical diode). Chúng giúp giảm giá thành thiết bị và
giảm thiểu chi phí tính toán.

Mục tiêu của thế hệ PCM đầu tiên là cạnh tranh với DRAM: độ trễ đọc và ghi, độ
bền qua các chu kỳ ghi (cyclic write), retention, v.v. Một vài báo cáo đã cho
ra kết quả khả quan với độ trễ ghi 120ns, độ trễ đọc 150ns và độ bền có chu kỳ
lớn hơn 1E9. Tuy nhiên, PCM vẫn chưa đạt được thành công trên thị trường bởi vì
NAND Flash và DRAM vẫn tiếp tục phát triển nhanh chóng.

Tuy nhiên, với nhu cầu của memory-centric computing và storage-class memory
(SCM), PCM có thể được dùng để lấp khoảng trống giữa NAND Flash và DRAM. Điều
này có nghĩa là SCM phải đồng thời rẻ hơn DRAM và nhanh hơn NAND Flash. Để trở
thành SCM, tốc độ đọc và giá thành của PCM phải tiếp tục được cải thiện nhiều
hơn nữa.

